# ===========================================
# Hypothesis Arena - Environment Configuration
# ===========================================

# Server
NODE_ENV=development
PORT=3000
LOG_LEVEL=info

# ===========================================
# Database (PostgreSQL)
# ===========================================
# Recommended: Neon (https://neon.tech) - Free tier available
# Format: postgresql://user:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://user:password@ep-xxx.neon.tech/hypothesis_arena?sslmode=require

# ===========================================
# Redis
# ===========================================
# Recommended: Upstash (https://upstash.com) - Free tier available
# Format: rediss://default:token@host:port
REDIS_URL=rediss://default:xxx@xxx.upstash.io:6379

# ===========================================
# Authentication
# ===========================================
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRY=7d
REFRESH_TOKEN_EXPIRY=30d

# ===========================================
# WEEX API (Live Trading)
# ===========================================
# Get credentials from: https://www.weex.com/api
WEEX_API_KEY=
WEEX_SECRET_KEY=
WEEX_PASSPHRASE=
WEEX_BASE_URL=https://api-contract.weex.com
WEEX_WS_URL=wss://ws-contract.weex.com/v2/ws

# ===========================================
# WEEX Proxy (For IP Whitelist)
# ===========================================
# WEEX API is IP-whitelisted. If your IP isn't whitelisted, you can route
# requests through a proxy server running on a whitelisted VM.
#
# 1. Deploy weex-proxy/ to your whitelisted VM (see weex-proxy/README.md)
# 2. Set PROXY_TOKEN on the VM (generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64url'))")
# 3. Update these values to point to your proxy:
#
# WEEX_BASE_URL=http://your-vm-ip:port
# WEEX_PROXY_TOKEN=your-generated-token
#
WEEX_PROXY_TOKEN=

# ===========================================
# AI Services
# ===========================================
# Google Gemini API
# Get key from: https://aistudio.google.com/apikey
GEMINI_API_KEY=

# ===========================================
# Market Data (Optional)
# ===========================================
# Financial Modeling Prep API
# Get key from: https://financialmodelingprep.com/developer/docs/
FMP_API_KEY=demo

# ===========================================
# Frontend (Vite uses VITE_ prefix)
# ===========================================
VITE_API_URL=/api
VITE_WS_URL=/ws

# ===========================================
# Trading Configuration
# ===========================================
# Maximum position size as percentage of portfolio (0.2 = 20%)
MAX_POSITION_SIZE=0.2

# Maximum total invested as percentage of portfolio (0.8 = 80%)
MAX_TOTAL_INVESTED=0.8

# Drawdown threshold to pause trading (0.3 = 30%)
DRAWDOWN_PAUSE_THRESHOLD=0.3

# Drawdown threshold to liquidate (0.8 = 80%)
DRAWDOWN_LIQUIDATE_THRESHOLD=0.8

# Maximum leverage allowed
MAX_LEVERAGE=10

# ===========================================
# Autonomous Trading Engine
# ===========================================
# Capital allocation (in USDT)
NUM_AI_ANALYSTS=8              # Number of AI analysts (8 analysts)
AI_ANALYST_BUDGET=100          # Budget per AI analyst ($100 each = $800 total)
USER_TRADING_BUDGET=200        # Budget for user manual trading
TOTAL_CAPITAL=1000             # Total system capital

# Timing (in milliseconds)
CYCLE_INTERVAL_MS=300000       # 5 minutes between trading cycles
MIN_TRADE_INTERVAL_MS=900000   # 15 minutes cooldown per analyst

# Debate frequency
DEBATE_FREQUENCY=3             # Run debates every N cycles

# Risk management
MAX_POSITION_SIZE_PERCENT=30   # Max 30% of portfolio per position
MIN_BALANCE_TO_TRADE=10        # Minimum balance to allow trading
DEFAULT_LEVERAGE=5             # Default leverage for trades
STOP_LOSS_PERCENT=5            # Default stop loss percentage
TAKE_PROFIT_PERCENT=10         # Default take profit percentage

# AI decision thresholds
MIN_CONFIDENCE_TO_TRADE=60     # Minimum AI confidence to execute trade
MIN_CONSENSUS_TO_TRADE=2       # Minimum analysts agreeing to trade

# Retries
MAX_RETRIES=3                  # Max retries for failed operations

# Dry run mode (set to true to simulate trades without executing)
DRY_RUN=false

# ===========================================
# Compliance
# ===========================================
# Require AI logs for all trades (WEEX compliance)
REQUIRE_AI_LOGS=true

# ===========================================
# CORS
# ===========================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

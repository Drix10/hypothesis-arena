# Hypothesis Arena v5.5.0 (HYBRID AI EDITION)

NODE_ENV=development
PORT=25655
LOG_LEVEL=info

# Database
DATABASE_URL="file:./dev.db"

# WEEX API
WEEX_API_KEY=your_api_key
WEEX_SECRET_KEY=your_secret_key
WEEX_PASSPHRASE=your_passphrase
WEEX_BASE_URL=https://api-contract.weex.com
WEEX_WS_URL=wss://ws-contract.weex.com/v2/ws

# =============================================================================
# AI PROVIDER CONFIGURATION
# =============================================================================
# Two modes available:
#
# MODE 1: Single Provider (AI_HYBRID_MODE=false)
#   All 4 analysts + judge use the same provider
#   Set AI_PROVIDER to 'gemini' or 'openrouter'
#
# MODE 2: Hybrid Mode (AI_HYBRID_MODE=true)
#   Split analysts across providers for diversity:
#   - jim, ray → DeepSeek via OpenRouter
#   - karen, quant → Gemini
#   - Judge → Gemini (for reliability)
# =============================================================================

# Primary provider (used when AI_HYBRID_MODE=false)
AI_PROVIDER=gemini

# Gemini Configuration
GEMINI_API_KEY=your_gemini_api_key
GEMINI_MODEL=gemini-2.0-flash

# OpenRouter Configuration
OPENROUTER_API_KEY=your_openrouter_api_key
OPENROUTER_MODEL=deepseek/deepseek-chat

# =============================================================================
# HYBRID AI MODE (v5.5.0)
# =============================================================================
# Enable to use both Gemini and OpenRouter simultaneously
# ⚠️ WARNING: When enabling AI_HYBRID_MODE=true, you MUST also set:
#   - All ANALYST_*_PROVIDER vars (jim, ray, karen, quant)
#   - JUDGE_PROVIDER
#   - Both API keys (GEMINI_API_KEY and OPENROUTER_API_KEY)
#
# Analyst identifiers:
#   jim   = Statistical Arbitrage analyst (mean reversion, patterns)
#   ray   = ML-Driven Signals analyst (AI/ML, regime detection)
#   karen = Multi-Strategy Risk analyst (portfolio optimization)
#   quant = Liquidity & Arbitrage analyst (market microstructure)
#   judge = Final decision maker that picks the winning recommendation

AI_HYBRID_MODE=false
ANALYST_JIM_PROVIDER=openrouter
ANALYST_RAY_PROVIDER=openrouter
ANALYST_KAREN_PROVIDER=gemini
ANALYST_QUANT_PROVIDER=gemini
JUDGE_PROVIDER=gemini

# =============================================================================
# TRADING MODE
# =============================================================================
COMPETITION_MODE=false
STARTING_BALANCE=1000
CYCLE_INTERVAL_MS=480000
MIN_BALANCE_TO_TRADE=200
MIN_CONFIDENCE_TO_TRADE=50
MAX_DAILY_TRADES=20
DRY_RUN=true

# Position urgency thresholds
TARGET_PROFIT_PCT=5
STOP_LOSS_PCT=2.5
MAX_HOLD_HOURS=12

# AI confidence thresholds (0-100)
MODERATE_CONFIDENCE_THRESHOLD=60
HIGH_CONFIDENCE_THRESHOLD=70
VERY_HIGH_CONFIDENCE_THRESHOLD=80

# Position sizing (percentage of starting balance)
MIN_POSITION_PERCENT=10
TARGET_POSITION_MIN_PERCENT=12
TARGET_POSITION_MAX_PERCENT=15
MAX_POSITION_PERCENT=20

# Deployment limits (percentage of capital)
TARGET_DEPLOYMENT_PERCENT=50
MAX_DEPLOYMENT_PERCENT=60

# Monte Carlo validation thresholds
MC_MIN_SHARPE_RATIO=1.2
MC_TARGET_SHARPE_RATIO=1.8
MC_EXCELLENT_SHARPE_RATIO=2.5
MC_MIN_WIN_RATE=0.52
MC_MAX_DRAWDOWN_PERCENT=30

# Q-value (RL) thresholds
Q_VALUE_MINIMUM=0.45
Q_VALUE_CONSENSUS=0.55
Q_VALUE_HIGH_CONFIDENCE=0.75

# Risk management
MAX_CONCURRENT_POSITIONS=3
MAX_SAME_DIRECTION_POSITIONS=2
WEEKLY_DRAWDOWN_LIMIT_PERCENT=10

# Global risk limits (production defaults)
MAX_SAFE_LEVERAGE=10
AUTO_APPROVE_LEVERAGE_THRESHOLD=5
ABSOLUTE_MAX_LEVERAGE=20
MAX_POSITION_SIZE_PERCENT=25
MAX_TOTAL_LEVERAGED_CAPITAL_PERCENT=40
MAX_RISK_PER_TRADE_PERCENT=5
MAX_CONCURRENT_RISK_PERCENT=15

# Leverage scaling by exposure (percentage multipliers)
LEVERAGE_SCALE_40PCT_MULT=0.82
LEVERAGE_SCALE_50PCT_MULT=0.70

# Risk Council limits
MAX_FUNDING_AGAINST_PERCENT=0.001
MAX_SECTOR_POSITIONS=3
NET_EXPOSURE_LIMIT_LONG=70
NET_EXPOSURE_LIMIT_SHORT=70

# Correlation risk thresholds
ENABLE_CORRELATION_CHECKS=true
HIGH_CORRELATION_THRESHOLD=0.8
MAX_CORRELATED_POSITIONS=2
BTC_CORRELATION_WARNING=0.85

# Circuit breaker thresholds
CIRCUIT_YELLOW_BTC_DROP_4H=12
CIRCUIT_YELLOW_DRAWDOWN_24H=15
CIRCUIT_RED_BTC_DROP_4H=20
CIRCUIT_RED_DRAWDOWN_24H=30

# Stop loss requirements by leverage tier
SL_LOW_MAX_LEVERAGE=5
SL_LOW_MAX_STOP_PERCENT=6
SL_MEDIUM_MAX_LEVERAGE=10
SL_MEDIUM_MAX_STOP_PERCENT=3
SL_HIGH_MAX_LEVERAGE=15
SL_HIGH_MAX_STOP_PERCENT=2
SL_EXTREME_MAX_LEVERAGE=20
SL_EXTREME_MAX_STOP_PERCENT=1.5

# Anti-churn rules (aligned with 8 min cycle)
MAX_TRADES_PER_SYMBOL_PER_HOUR=3
COOLDOWN_AFTER_TRADE_MS=960000
COOLDOWN_BEFORE_FLIP_MS=1440000

# Sentiment & News APIs
NEWSDATA_API_KEY=your_newsdata_api_key

# CORS
CORS_ORIGINS=http://localhost:25655,http://localhost:3000

# Admin endpoints
AUTONOMOUS_ADMIN_ENABLED=false

# Reddit sentiment
REDDIT_SENTIMENT_ENABLED=true

# =============================================================================
# PRODUCTION TUNING (v5.4.1)
# =============================================================================

# Monte Carlo Simulation
MC_TRADING_COST_PCT=0.06
MC_STUDENT_T_DF=3
MC_GARCH_ALPHA=0.1
MC_GARCH_BETA=0.85
MC_TRADES_PER_YEAR=750

# Regime Detection
REGIME_HISTORY_MAX=20
REGIME_HISTORY_MAX_SYMBOLS=50
REGIME_CLEANUP_INTERVAL_MS=960000
REGIME_MAX_AGE_MS=86400000

# Quant Analysis Cache
QUANT_CACHE_TTL_MS=480000
QUANT_MAX_CACHE_SIZE=100

# Funding Rate History
FUNDING_HISTORY_MAX_ENTRIES=21
FUNDING_HISTORY_MAX_AGE_MS=604800000
FUNDING_HISTORY_MAX_SYMBOLS=50

# Sentiment Service
SENTIMENT_NEWS_CACHE_TTL_MS=1440000
SENTIMENT_FEAR_GREED_CACHE_TTL_MS=3600000
SENTIMENT_MAX_CACHE_SIZE=100
SENTIMENT_REQUEST_TIMEOUT_MS=10000
SENTIMENT_MIN_FETCH_INTERVAL_MS=480000
SENTIMENT_BTC_WEIGHT=0.6
SENTIMENT_ETH_WEIGHT=0.4

# Reddit Sentiment
REDDIT_CACHE_TTL_MS=1440000
REDDIT_REQUEST_DELAY_MS=2500
REDDIT_REQUEST_TIMEOUT_MS=10000
REDDIT_STALE_THRESHOLD_MS=1200000
REDDIT_MAX_POST_AGE_HOURS=24
REDDIT_MAX_CACHE_SIZE=50

# Position Sync
POSITION_MAX_TRACKED_TRADES=100
POSITION_STALE_TRADE_HOURS=72
POSITION_OUTCOME_THRESHOLD_PCT=1.0
POSITION_MISSING_CYCLE_THRESHOLD=3

# Analyst Portfolio
PORTFOLIO_RECENT_TRADES_LIMIT=10
PORTFOLIO_LOCK_TIMEOUT_MS=30000
PORTFOLIO_MAX_RETRIES=2
PORTFOLIO_RETRY_DELAY_MS=1000

# WEEX Client
WEEX_REQUEST_TIMEOUT_MS=120000
WEEX_RATE_LIMIT_MAX_ATTEMPTS=20
WEEX_RATE_LIMIT_MAX_WAIT_MS=60000
